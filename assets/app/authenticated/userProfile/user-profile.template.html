<flash-messages></flash-messages>
<div class="page-wrapper">

  <div class="sidebar">

    <div class="picture-container">
      <img src="/img/user.png" id="profile-picture" alt="Profile picture">
      <label class="image-upload-label" for="img-upload-input"><i class="fa fa-pencil"></i></label>
      <input class="image-upload-input" id="img-upload-input" type="file" (change)="fileChanged($event)" style="display: none;">
      <span class="username">{{user?.firstName}} {{user?.lastName}}</span>
    </div>

    <dl class="profile-info">
      <dt>Email</dt>
      <dd class="email">
          <a href="mailto:{{ user?.email }}">{{user?.email}}</a>
      </dd>

      <dt>Location</dt>
      <dd class="location">{{user?.location}}</dd>

      <dt>Phone</dt>
      <dd class="phone">
        <div class="info" [hidden]="editPhone">
          {{ user?.phone ? user?.phone : 'n/a' }}
          <i class="fa fa-pencil" (click)="editPhone = true"></i>
        </div>
        <div class="edit" [hidden]="!editPhone">
          <input id="input-phone" type="text" [value]="user?.phone ? user?.phone : 'n/a' "
                 (input)="newPhone = $event.target.value" required="">
          <i class="fa fa-floppy-o" (click)="save($event)"></i>
        </div>
      </dd>
    </dl>

    <div id="change-pwd" (click)="openModal()">Change Password</div>

  </div>

  <main class="content">

    <div class="bar" [class.expanded]="showTask">
      <div class="bar-head" (click)="toggleTask()">
        Tasks
        <i class="fa fa-chevron-right"></i>
      </div>
      <div class="bar-content">
        <div class="task-list">
          <div class="g-card task-card" *ngFor="let assignedTask of assignedTasks">
            <h5 class="g-card-title task-title">
              <a routerLink="/user/project/show/{{ assignedTask?.project._id }}">{{ assignedTask?.task.title }}</a>
            </h5>
            <!--<p class="task-client">{{ assignedTask?.project.client }}</p>-->
            <p class="g-card-text task-description">{{ assignedTask?.task.description }}</p>
          </div>
          <div class="empty-task-bar" *ngIf="assignedTasks?.length === 0">
            you don't have any assigned tasks
          </div>
        </div>
      </div>

    </div>
    <div class="bar" [class.expanded]="showProject">
      <div class="bar-head" (click)="toggleProject()" >
        Created Projects
        <i class="fa fa-chevron-right"></i>
      </div>
      <div class="bar-content project" >
        <div class="project-type confirmed"><img src="/img/pikto/2_Confirmed.svg"><br />confirmed</div>
        <div class="project-type tentative"><img src="/img/pikto/3_Tentative.svg"><br />tentative</div>
        <div class="project-type internal"><img src="/img/pikto/4_Internal.svg"><br />internal</div>
        <!--<div class="project-container">-->
          <!--<div class="g-card"  *ngFor="let project of projects; let i = index" routerLink="../project/show/{{project?._id}}" >-->
            <!--<h5 class="g-card-title {{ project?.type }}">{{ project?.title }}</h5>-->
            <!--<div class="g-card-text" >{{ project?.client }}</div>-->
            <!--<div class="g-card-text">{{ project?.start | date:"dd/MM/yy" }} - {{ project?.end | date:"dd/MM/yy"}}</div>-->
          <!--</div>-->
        <!--</div>-->
      </div>
    </div>
    <div class="bar" [class.expanded]="showSkill">
      <div class="bar-head" (click)="toggleSkill()" >
        Skills
        <i class="fa fa-chevron-right"></i>
      </div>
      <div class="bar-content">
        <app-user-skill-list class="skill-list" [showSkillTypeIcons]="false"></app-user-skill-list>
      </div>
    </div>

  </main>
</div>

<app-modal [modal-id]="change-pwd-modal" modal-title="Change Password">
  Test lkadflkasjdf
  <app-change-password></app-change-password>
</app-modal>
